// Test 11: AMR Sensitivity
// Tests for adaptive mesh refinement artifacts
// Validates AMR consistency and checks for refinement artifacts

diffusion_coefficient = 0.001

CartesianGeometry {
   domain_boxes = [ (0,0) , (63,63) ]
   x_lo = -1.0, -1.0
   x_up = 1.0, 1.0
   periodic_dimension = 0, 0
}

Main {
   log_file_name = "test11.log"
   log_all_nodes = FALSE
   viz_writer = "VisIt"
   viz_dump_interval = 10
   viz_dump_dirname = "viz_test11"
   timer_enabled = TRUE

   DT = 0.01
   START_TIME = 0.0
   END_TIME = 1.0
}

INSStaggeredHierarchyIntegrator {
   mu = 0.01
   rho = 1.0
   start_time = 0.0
   end_time = 1.0
   num_cycles = 1
}

AdvDiffHierarchyIntegrator {
   start_time = 0.0
   end_time = 1.0
   num_cycles = 1
   diffusion_time_stepping_type = "CRANK_NICOLSON"
}

GriddingAlgorithm {
   max_levels = 3
   ratio_to_coarser {
      level_1 = 2, 2
      level_2 = 2, 2
   }
   largest_patch_size {
      level_0 = 512, 512
   }
   smallest_patch_size {
      level_0 = 8, 8
   }
}

StandardTagAndInitialize {
   tagging_method = "GRADIENT_DETECTOR"
   RefineBoxes {
      // Refine center region where Gaussian is located
      level_0 = [( 24 , 24 ),( 39 , 39 )]
      level_1 = [( 52 , 52 ),( 75 , 75 )]
   }
}

LoadBalancer {
   bin_pack_method = "SPATIAL"
}

OdorInitialConditions {
   function = "exp(-10.0*(X_0*X_0 + X_1*X_1))"
}

OdorBcCoefs {
   acoef_function_0 = "1.0"
   acoef_function_1 = "1.0"
   acoef_function_2 = "1.0"
   acoef_function_3 = "1.0"

   bcoef_function_0 = "0.0"
   bcoef_function_1 = "0.0"
   bcoef_function_2 = "0.0"
   bcoef_function_3 = "0.0"

   gcoef_function_0 = "0.0"
   gcoef_function_1 = "0.0"
   gcoef_function_2 = "0.0"
   gcoef_function_3 = "0.0"
}
